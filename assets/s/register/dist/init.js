define("sjplus/register/0.0.1/init",["sjplus/global/0.0.1/crypto/sha3"],function(a){function b(a){a.preventDefault(),$(this).find("img")[0].src="/captcha?t="+(new Date).getTime()}var c=document.forms.register,d=a("sjplus/global/0.0.1/crypto/sha3"),e=$(c),f=c.elements,g=/(?:[a-z0-9!#$%&'*+/=?^_{|}~-]+(?:.[a-z0-9!#$%&'*+/=?^_{|}~-]+)*|"(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21\x23-\x5b\x5d-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])*")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\[(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?|[a-z0-9-]*[a-z0-9]:(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21-\x5a\x53-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])+)\])/,h=/^[\u4e00-\u9fa5a-z][\u4e00-\u9fa5a-z0-9]{2,}$/;e.on("submit",function(a){a.preventDefault();var b=$.trim(f._.value),e=$.trim(f.__.value),i=f.___.value,j=f.captcha.value,k=f["read-rule"],l=0;return h.test(b)||(console.log("user name fail"),$(f._).addClass("error"),l++),g.test(e)||(console.log("email fail"),$(f.__).addClass("error"),l++),/^[^\s]{3,}$/.test(i)||(console.log("password fail"),$(f.___).addClass("error"),l++),/^[^\s]{4}$/.test(j)||(console.log("captcha fail"),$(f.___).addClass("error"),l++),k.checked&&"yes"===k.value||(console.log("rule fail"),$(f.___).addClass("error"),l++),l>0?(console.log("register abort"),void 0):($.ajax({url:c.action,type:"post",data:{_:b,__:e,___:d(i).toString(),captcha:c.elements.captcha.value,readRule:k.checked&&k.value,_csrf:window._csrf_token_},dataType:"json"}).done(function(a){console.log(a)}).error(function(){alert("register error")}),void 0)});var i=$("#captchaTrigger");i.on("click",b),console.log(i)});
